try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="c25d5bbc-ef95-4ba2-bada-d3c2964e4b8f",e._sentryDebugIdIdentifier="sentry-dbid-c25d5bbc-ef95-4ba2-bada-d3c2964e4b8f")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:anthropic-apps":!0})}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[63471],{0x3fb05180:(e,t,a)=>{a.d(t,{l:()=>u});var n=a(0x22102fd88),l=a(0x18724109a),s=a(0xa0c99a98),i=a(0x1a1f6dda6),r=a(0xfc89b4a4),d=a(0x1ab0d1ca1),o=a(0x1cf5ab98a);let c=(0,s.F)("flex\n  justify-between\n  w-fit\n  rounded-xl\n  p-3\n  gap-3\n  items-start\n  text-sm\n  border-0.5\n  border-border-200\n",{variants:{variant:{main:"bg-bg-200",danger:"text-danger-000 border-danger-100 bg-danger-900"}}});function u(e){let{message:t,onClose:a,...s}=e,u=(0,d.A)(),v=()=>"icon"in s&&s.icon?(0,n.jsx)("div",{className:"h-8 ml-1 flex items-center",children:r.createElement(s.icon,{size:20})}):null,f=()=>a?(0,n.jsx)(o.$,{size:"icon_sm",variant:"ghost",onClick:a,colorized:!0,"aria-label":u.formatMessage({defaultMessage:"Dismiss",id:"TDaF6JVgG6"}),children:(0,n.jsx)(l.X,{size:16})}):null,m=()=>"customAction"in s&&s.customAction?s.customAction:s.button?(0,n.jsx)(o.$,{...s.button,variant:"secondary",colorized:!0,size:"sm"}):null;if("pictogram"in s&&s.pictogram){let e=s.pictogram,a=m();return(0,n.jsxs)("div",{className:"flex items-center w-fit rounded-xl p-3 text-sm border-0.5 border-border-200 bg-bg-200",children:[(0,n.jsx)(e,{size:"small",highlightFill:"pictogram-200"}),(0,n.jsx)("div",{className:"mx-3",children:t}),a&&(0,n.jsx)("div",{className:"mr-2",children:a}),f()]})}let p="variant"in s?s.variant:"main",x="actionLayout"in s?s.actionLayout:void 0,g="className"in s?s.className:void 0;return"multiline"===x?(0,n.jsxs)("div",{"data-color-context":p,className:(0,i.A)(c({variant:p}),g),children:[(0,n.jsxs)("div",{className:"flex items-start",children:[v(),(0,n.jsxs)("div",{className:"mt-[0.35rem] ml-3",children:[(0,n.jsx)("div",{children:t}),(0,n.jsx)("div",{className:"mt-3",children:m()})]})]}),f()]}):(0,n.jsxs)("div",{"data-color-context":p,className:(0,i.A)(c({variant:p}),g),children:[(0,n.jsxs)("div",{className:"flex items-start",children:[v(),(0,n.jsx)("div",{className:"my-[0.35rem] ml-3",children:t})]}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"mr-1",children:m()}),f()]})]})}},0x401a1006:(e,t,a)=>{a.d(t,{l:()=>n.l});var n=a(0x3fb05180)},0x5d793911:(e,t,a)=>{a.d(t,{O:()=>s,U:()=>i});var n=a(0xfc89b4a4),l=a(0x1950735db);let s=()=>{let e=(0,n.useContext)(l.O);if(!e)throw Error("useExtensions must be used within ExtensionsProvider");return e},i=()=>{let{extensions:e,setExtensionSettings:t}=s();return async a=>{let n=e.find(e=>e.id===a);if(!n)return;let l=n.settings||{};await t(a,{...l,isEnabled:!l.isEnabled})}}},0x102661e8c:(e,t,a)=>{a.d(t,{X:()=>c});var n=a(0x22102fd88),l=a(0x139b5e710),s=a(0x225bae024),i=a(0x2252bfeb8),r=a(0xfc89b4a4),d=a(0x1ab0d1ca1),o=a(0x38e6572);let c=e=>{let{extension:t,size:a="normal",style:c}=e,u=(0,d.A)(),{addError:v}=(0,l.Yf)(),[f,m]=(0,r.useState)(null),[p,x]=(0,r.useState)(!0),[g,b]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{if(!t.id)return x(!1);try{var e;let a=await (null===i.Fd||void 0===i.Fd||null==(e=i.Fd.getIsUpdateAvailable)?void 0:e.call(i.Fd,t.id,t.manifest))||null;m(a)}catch(e){v((0,n.jsx)(o.A,{defaultMessage:"Failed to check for extension updates",id:"qmTCOIrDRY",description:"Error message when checking for extension updates fails"}),{error:e})}finally{x(!1)}})()},[t,v]);let y=async()=>{if(t.id&&f){b(!0);try{var e;await (null===i.Fd||void 0===i.Fd||null==(e=i.Fd.installDxtFromDirectory)?void 0:e.call(i.Fd,t.id,f))}catch(e){v((0,n.jsx)(o.A,{defaultMessage:"Failed to update extension",id:"II6Ozv49Lo",description:"Error message when extension update fails"}),{error:e})}finally{b(!1)}}};if(p||!f)return null;let h=u.formatMessage({defaultMessage:"Update available to v{version}. You are currently on v{currentVersion}.",id:"2Fd2dxtEBo",description:"Title for extension update button"},{version:f,currentVersion:t.manifest.version});return(0,n.jsx)(s.$,{variant:"primary",disabled:g,onClick:y,title:h,style:c,children:g?u.formatMessage({defaultMessage:"Updating...",id:"yugrR4jIsZ",description:"Button text while updating extension"}):"small"===a?u.formatMessage({defaultMessage:"Update",id:"rQoNAJyEVw",description:"Button to update extension (short version)"}):u.formatMessage({defaultMessage:"Update to {version}",id:"Wur112HVmK",description:"Button to update extension to specific version"},{version:f})})}},0x1417f52d9:(e,t,a)=>{a.d(t,{W:()=>i});var n=a(0x17aa9d8d7),l=a(0x14de19ae8),s=a(0xfc89b4a4);function i(){let{mutate:e,isPending:t}=(0,n.yJ)(),{account:a}=(0,l.YL)();return{dismiss:(0,s.useCallback)(t=>{var n,l,s;a&&(null!=a&&null!=(l=a.settings)&&null!=(n=l.dismissed_claudeai_banners)&&n.some(e=>e.banner_id===t)||e({dismissed_claudeai_banners:[...(null==a||null==(s=a.settings)?void 0:s.dismissed_claudeai_banners)||[],{banner_id:t,dismissed_at:new Date().toISOString()}]}))},[a,e]),isDismissed:(0,s.useCallback)(e=>{var t,n;let l=(null==a||null==(n=a.settings)||null==(t=n.dismissed_claudeai_banners)?void 0:t.some(t=>t.banner_id===e))||!1;return l&&localStorage.removeItem(e),l},[a]),isPending:t}}},0x1950735db:(e,t,a)=>{a.d(t,{O:()=>i,y:()=>r});var n=a(0x22102fd88),l=a(0x2252bfeb8),s=a(0xfc89b4a4);let i=(0,s.createContext)(void 0),r=e=>{let{children:t}=e,[a,r]=(0,s.useState)([]),[d,o]=(0,s.useState)(!0),[c,u]=(0,s.useState)(!1),[v,f]=(0,s.useState)(null),[m,p]=(0,s.useState)(!0),[x,g]=(0,s.useState)(!0),b=(0,s.useCallback)(async()=>{try{var e;o(!0),f(null);let t=await (null===l.Fd||void 0===l.Fd||null==(e=l.Fd.getInstalledExtensionsWithState)?void 0:e.call(l.Fd));t&&r(t),u(!0)}catch(e){f(e instanceof Error?e.message:"Failed to load extensions")}finally{o(!1)}},[]),y=(0,s.useCallback)(async(e,t)=>{try{var a;await (null===l.Fd||void 0===l.Fd||null==(a=l.Fd.setExtensionSettings)?void 0:a.call(l.Fd,e,t)),r(a=>a.map(a=>a.id===e?{...a,settings:{...a.settings,...t}}:a))}catch(e){f(e instanceof Error?e.message:"Failed to update extension settings"),await b()}},[b]),h=(0,s.useCallback)(async e=>{try{var t;await (null===l.Fd||void 0===l.Fd||null==(t=l.Fd.deleteExtension)?void 0:t.call(l.Fd,e)),r(t=>t.filter(t=>t.id!==e))}catch(e){f(e instanceof Error?e.message:"Failed to delete extension"),await b()}},[b]);(0,s.useEffect)(()=>{var e,t,a,n;b(),null===l.Fd||void 0===l.Fd||null==(e=l.Fd.isDirectoryEnabled)||e.call(l.Fd).then(p),null===l.Fd||void 0===l.Fd||null==(t=l.Fd.isExtensionsEnabled)||t.call(l.Fd).then(g);let s=null===l.Fd||void 0===l.Fd||null==(a=l.Fd.onExtensionsChanged)?void 0:a.call(l.Fd,()=>{b()}),i=null===l.Fd||void 0===l.Fd||null==(n=l.Fd.onExtensionSettingsChanged)?void 0:n.call(l.Fd,(e,t)=>{r(a=>a.map(a=>a.id===e?{...a,settings:{...a.settings,...t}}:a))});return()=>{null==s||s(),null==i||i()}},[b]);let w=(0,s.useCallback)(e=>a.find(t=>t.id===e),[a]),_=(0,s.useMemo)(()=>({extensions:a,isLoading:d,hasLoadedOnce:c,error:v,isDirectoryEnabled:m,isExtensionsEnabled:x,setExtensionSettings:y,deleteExtension:h,getExtensionById:w}),[h,v,a,w,m,x,d,y,c]);return(0,n.jsx)(i.Provider,{value:_,children:t})}},0x1eb0949d5:(e,t,a)=>{a.d(t,{S:()=>m});var n=a(0x22102fd88),l=a(0x139b5e710),s=a(0x2471dc42f),i=a(0x225bae024),r=a(0x2252bfeb8),d=a(0x12a3a86b6),o=a(0x1ab362a20),c=a(0x88148a10),u=a(0xfc89b4a4),v=a(0x1ab0d1ca1),f=a(0x38e6572);let m=e=>{let{manifest:t,settings:a,onSave:m,onCancel:p,className:x}=e,g=(0,v.A)(),{addError:b}=(0,l.Yf)(),[y,h]=(0,u.useState)({}),[w,_]=(0,u.useState)(!1),[j,F]=(0,u.useState)(!1),[M,N]=(0,u.useState)(!1);if((0,u.useEffect)(()=>{if(a.userConfig)h(a.userConfig);else if(t.user_config){let e={};for(let[a,n]of Object.entries(t.user_config))void 0!==n.default&&(e[a]=n.default);h(e)}},[t.user_config,a.userConfig]),!t.user_config)return null;let k=(e,t)=>{h(a=>({...a,[e]:t})),_(!0)},C=async()=>{F(!0);try{await m(y),_(!1),N(!0),setTimeout(()=>{N(!1)},1e4)}catch(e){b((0,n.jsx)(f.A,{defaultMessage:"Failed to save configuration",id:"k3HNr+oyR6",description:"Error message when extension configuration save fails"}),{error:e})}finally{F(!1)}};return(0,n.jsx)("div",{className:x,children:(0,n.jsxs)("div",{className:"break-inside-avoid",children:[Object.entries(t.user_config).map(e=>{let[t,a]=e;return(0,n.jsx)("div",{className:"mb-5",children:(0,n.jsxs)("label",{children:[(0,n.jsxs)("div",{className:"mb-2",children:[(0,n.jsx)("span",{className:"text-md",children:a.title}),a.required&&(0,n.jsx)("span",{className:"text-text-400 ml-1",children:(0,n.jsx)(f.A,{defaultMessage:"(Required)",id:"5Q3Kor4lDg",description:"Label indicating a configuration field is required"})})]}),a.description&&"boolean"!==a.type&&(0,n.jsx)("p",{className:"text-xs text-text-400 mt-2 mb-3",children:a.description}),(0,n.jsx)("div",{className:"mb-2 mt-2",children:((e,t)=>{let a=y[e],l="w-full px-3 py-2 border border-border-300/25 rounded-md text-sm text-text-100 bg-bg-100";switch(t.type){case"string":return(0,n.jsx)("input",{type:t.sensitive?"password":"text",value:a||"",onChange:t=>k(e,t.target.value),placeholder:t.description,className:l});case"number":return(0,n.jsx)("input",{type:"number",value:a||"",onChange:t=>k(e,t.target.value?Number(t.target.value):""),min:t.min,max:t.max,placeholder:t.description,className:l});case"boolean":return(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(s.j,{checked:a||!1,onChange:t=>k(e,t.target.checked)}),(0,n.jsx)("span",{className:"text-sm text-text-300",children:t.description})]});case"directory":case"file":if(!t.multiple)return(0,n.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,n.jsx)("input",{type:"text",value:a||"",onChange:t=>k(e,t.target.value),placeholder:g.formatMessage({defaultMessage:"{type} path",id:"p8XbPZF2o4",description:"Placeholder for directory or file path input"},{type:"directory"===t.type?"Directory":"File"}),className:"".concat(l," flex-1 w-auto")}),(0,n.jsx)(i.$,{variant:"secondary",onClick:async()=>{var a,n;let l="directory"===t.type?await (null===r.un||void 0===r.un||null==(a=r.un.getDirectoryPath)?void 0:a.call(r.un,!1)):await (null===r.un||void 0===r.un||null==(n=r.un.getFilePath)?void 0:n.call(r.un,!1));l&&k(e,l[0])},className:"px-3 py-1.5",children:g.formatMessage({defaultMessage:"Browse",id:"0TPgIp3K/q",description:"Button to browse for file/directory"})})]});{let s=a||[];return(0,n.jsxs)("div",{children:[s.map((a,c)=>(0,n.jsxs)("div",{className:"flex gap-2 mb-2 items-center",children:[(0,n.jsx)("input",{type:"text",value:a,onChange:t=>{let a=[...s];a[c]=t.target.value,k(e,a)},placeholder:g.formatMessage({defaultMessage:"{type} path",id:"p8XbPZF2o4",description:"Placeholder for directory or file path input"},{type:"directory"===t.type?"Directory":"File"}),className:"".concat(l," flex-1 w-auto")}),(0,n.jsx)(i.$,{variant:"ghost",size:"icon",onClick:async()=>{var a,n;let l="directory"===t.type?await (null===r.un||void 0===r.un||null==(a=r.un.getDirectoryPath)?void 0:a.call(r.un,!1)):await (null===r.un||void 0===r.un||null==(n=r.un.getFilePath)?void 0:n.call(r.un,!1));if(l){let t=[...s];t[c]=l[0],k(e,t)}},children:(0,n.jsx)(d.sj,{})}),(0,n.jsx)(i.$,{variant:"ghost",size:"icon",onClick:()=>{k(e,s.filter((e,t)=>t!==c))},children:(0,n.jsx)(o.u,{})})]},c)),(0,n.jsxs)(i.$,{variant:"secondary",onClick:()=>{k(e,[...s,""])},className:"mt-2",children:[(0,n.jsx)(c.c,{className:"mr-1.5",size:16}),g.formatMessage({defaultMessage:"Add {type}",id:"1ddlPuxY71",description:"Button to add a new path"},{type:t.type})]})]})}default:return null}})(t,a)})]})},t)}),(0,n.jsxs)("div",{className:"flex gap-3 mt-6 justify-between items-center",children:[p&&(0,n.jsx)(i.$,{variant:"secondary",onClick:p,disabled:j,children:g.formatMessage({defaultMessage:"Cancel",id:"zVjtFM8JfM",description:"Button to cancel configuration edit"})}),M&&(0,n.jsx)("span",{className:"text-sm text-accent-secondary-100",children:g.formatMessage({defaultMessage:"Changes saved",id:"jdKVJo/vQ6",description:"Message shown after configuration is saved"})}),!M&&(0,n.jsx)("div",{}),(0,n.jsx)(i.$,{variant:"primary",onClick:C,disabled:!w||j,children:g.formatMessage({defaultMessage:"Save",id:"NuymVHsb1A",description:"Button to save configuration"})})]})]})})}},0x25062734b:(e,t,a)=>{a.d(t,{$V:()=>k,uC:()=>_,tg:()=>j,vx:()=>M,L$:()=>R,yr:()=>S,iy:()=>q,kX:()=>N,sb:()=>F,v_:()=>I,Ax:()=>z,M8:()=>E,ko:()=>C,AY:()=>A,es:()=>D}),a(0x21e26ba67);var n=a(0x286b4261),l=a.n(n),s=a(0x17aa9d8d7),i=a(0xf32c56dd),r=a(0x12c9046cd),d=a(0x14de19ae8),o=a(0xc1dd9efc),c=a(0xac309a83),u=a(0x1bd175d8c),v=a(0x78b33fbd),f=a(0xfc89b4a4),m=a(0x14c0dfde7),p=a(0x1d302b010),x=a(0x1417f52d9),g=a(0x9cb4c2a2),b=a(0x1c12b3087),y=a(0xe824fb1c),h=a(0xbdad302d),w=a(0x31c535e9);let _=["allow","ask","blocked"];function j(e){return e.includes(":")}let F=()=>(0,c.fS)("bagel_enabled"),M=()=>{let{account:e,activeOrganization:t}=(0,d.YL)(),a=(0,d.mV)(),n=(0,o.pG)(e,t,"claude-ai"),l=(0,o.yI)(e,t,o.Nt.IntegrationsManage);return!a||n||l},N=()=>{let e=(0,d.zm)(),t=M();return e&&!t},k="mcp_directory_chin",C=function(){var e,t;let{shouldTrack:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,f.useRef)(!1),l=F(),{dismiss:s}=(0,x.W)(),{account:i}=(0,d.YL)(),r=N(),o=new Date,c="".concat(o.getDate(),"-").concat(o.getMonth(),"-").concat(o.getFullYear()),u="".concat(k,"_").concat(c),v=(null!=(t=null==i||null==(e=i.settings.dismissed_claudeai_banners)?void 0:e.map(e=>e.banner_id))?t:[]).filter(e=>e.includes(k)),m=(0,f.useMemo)(()=>!(!l||r||v.includes(k))&&(!(v.length>3)||!v.includes(u)),[r,l,v,u]);return(0,f.useEffect)(()=>{!n.current&&m&&!v.includes(u)&&a&&(s(u),n.current=!0)},[u,v,a,s,m]),m};function S(e){var t;let a=(0,c.fS)("disable_destructive_mcp_tools_by_default"),{getMcpToolApprovalConfigSetting:n}=function(e){let{value:t}=(0,v.useDynamicConfig)("yukon_gold"===e?"tanuki_mcp_tool_approval_config":"mcp_tool_approval_config"),a=(0,f.useCallback)((e,a)=>{var n,l;if(!t||!e)return;let s=[e.url,e.uuid,e.name].map(e=>{var n,l;if(e)return(null==(n=t[e])?void 0:n[null!=a?a:"*"])||(null==(l=t[e])?void 0:l["*"])||void 0}).find(e=>void 0!==e);return void 0!==s?s:a&&(null==(n=t["*"])?void 0:n[a])!==void 0?t["*"][a]:(null==(l=t["*"])?void 0:l["*"])!==void 0?t["*"]["*"]:void 0},[t]);return{toolApprovalConfig:t,getMcpToolApprovalConfigSetting:a}}(e),{account:l}=(0,d.YL)(),s=null==l||null==(t=l.settings)?void 0:t.enabled_mcp_tools;return(0,f.useCallback)((e,t)=>{var l,i;let r=n(e,null==t?void 0:t.name),d=(null==t?void 0:t.alwaysApprovedKey)?null==s?void 0:s[null==t?void 0:t.alwaysApprovedKey]:void 0;return a&&(null==t||null==(l=t.annotations)?void 0:l.destructiveHint)===!0?{approvalRequired:!0,showAlwaysAllowed:!1}:"always"===r?{approvalRequired:!0,showAlwaysAllowed:!1,managedByOrg:!0}:d?{approvalRequired:!1}:"server"===r?{approvalRequired:!1,managedByServer:!0}:"never"===r&&!1!==d||"readOnly"===r&&(null==t||null==(i=t.annotations)?void 0:i.readOnlyHint)===!0&&!1!==d?{approvalRequired:!1}:{approvalRequired:!0,showAlwaysAllowed:!0,managedByOrg:!1,managedByServer:!1}},[a,n,s])}let A=()=>{let e=(0,y.Uz)({type:"local"});return!!(0,u.V)()&&e.length>0},E=()=>{var e,t,a;let n=(0,g.oM)(),l=(null==(e=n.pendingConversationSettings)?void 0:e.compass_mode)==="advanced"||(null==(a=n.conversation)||null==(t=a.conversationSettings)?void 0:t.compass_mode)==="advanced",s=(0,y.Uz)({type:"remote"}).length>0;return l&&s},D=e=>{let t=(0,b.jw)(),{account:a}=(0,d.YL)(),{updateSettings:n}=(0,w.IS)(),{track:r}=(0,i.st)(),{mutate:o}=(0,s.yJ)(),{mutateAsync:c}=(0,h.Z1)();return{toggleMcpToolEnabled:(s,i,d)=>{if(!a)return;let o=Array.isArray(s)?s.reduce((e,t)=>({...e,[t]:i}),{}):{[s]:i};r({event_key:"claudeai.mcp.tool.toggled",conversation_uuid:(null==t?void 0:t.id)||null,setting:s,value:i,url:d,source:null==e?void 0:e.source}),n({mcpToolsUpdate:o}).then(()=>{if(null==t?void 0:t.sessionId)return c({sessionId:t.sessionId})}).catch(l())},toggleMcpToolAlwaysApproved:(e,t)=>{a&&o({enabled_mcp_tools:{...a.settings.enabled_mcp_tools,[e]:t}})}}},I=e=>{let{activeOrganization:t}=(0,d.YL)(),a=null==t?void 0:t.uuid,{data:n}=(0,p.XT)(a,e||"",{enabled:!!e&&!!a});return!!n},z=()=>{let e=(0,m.p9)(),{activeOrganization:t}=(0,d.YL)(),a=null==t?void 0:t.uuid;return(0,r.L2)("/api/organizations/".concat(a,"/mcp/resources"),"POST",{enabled:e&&!!a})};function q(e){let t=S(e);return(e,a)=>t(y.eZ.getState().remoteServers[e],{name:a,alwaysApprovedKey:"",displayName:"",enabledKey:"",inputSchema:{type:"object"}})}function R(e){var t;let a=S(e),{account:n}=(0,d.YL)(),l=null==n||null==(t=n.settings)?void 0:t.enabled_mcp_tools,{value:s}=(0,v.useDynamicConfig)("yukon_silver_tool_perms");return(0,f.useCallback)(e=>{if((null==s?void 0:s[e])==="always_allow")return{permission:"allow",approvalState:{approvalRequired:!1}};let t=(0,y.pK)(e);if(!t)return{permission:"ask",approvalState:{approvalRequired:!0,showAlwaysAllowed:!0}};let{tool:n,server:i}=t;if((null==l?void 0:l[n.enabledKey])===!1)return{permission:"blocked",approvalState:{approvalRequired:!1}};let r=a("remote"===i.type?y.eZ.getState().remoteServers[i.uuid]:void 0,n);return r.approvalRequired?{permission:"ask",approvalState:r}:{permission:"allow",approvalState:r}},[a,l,s])}}}]);